---
title: 负数的补码
date: 2018-10-31 00:39:11
tags: linux
---

有一些很基础的知识也挺容易忘记的，比如说：负数补码。容易忘记的原因往往是因为理解得不够深刻。

### 取模和数学中的补数
取模的概念很容易理解，举个时钟的例子，12个小时转一圈，比如北京时间和比利时时间时差7小时，反应在时钟上就是：北京时间5点时，比利时时间10点，既可以通过5-7=-2%12=10得到，也可以通过5+（12-7）=5+5=10得到。

这时对于模12的数字7来说，5就是补数了。这说明啥？说明减去一个数等于加上这个数的补数，这样就能够把减法转变为加法了。

### 负数的补码
负数的补码就是取模/补数，先来个简单的4位机计算机，模2^4=16，如何计算5-3呢？
```
5-3

#等价于
5+(16-3)

#等价于用二进制表示
0101 + (1 0000 - 0011)

#等价于
0101 + (0001 + 1111 - 0011)

#等价于
0101 + (0001 + 1100) // 1100 就是0011的反码，而0001+1100就是0011的补码

#等价于
0101 + 1101

#等价于
1 0010

#因为最高位1溢出
0010 = 2
```

在计算机中如果是8位正负机的话，也就是模2^8=256，用最高位来表示正负，也就是范围在-127~127之间（一共255个数），就说-5，就用`1000 0101`表示，-5的补码是啥呢？根据上面的取模和补数的理论，因为最高位1代表负数，不动，那么：
```
-5

#二进制表示
1 000 0101

#除去最高位代表负数外，余下的7位可全填满，所以模的话是第8位为1 ，也就是128
#所以相当于不区分正负的1000 0000，也就是 111 1111 + 000 0001
(111 1111 + 000 0001) - 000 0101 = 000 0001+ 111 1010 = 111 1011

#所以-5的补数是：
1111 1011 = -123

#验证下减去一个数等于加上它的补数理论
125 - (- 5) = 130 % 128 = 2
125 + (-123) = 2
```

### 结论是啥
说明了上面的负数补码，其实总结就是这么一句话：`负数的补码等于最高位的其余位取反+1`，为啥+1这个其实很容易理解，就是就是模，比如上面的`1000 0000 = 0111 1111 + 0000 0001`，想想不难理解的东西，以前计算机老师只知道让记住，也是醉醉的。
